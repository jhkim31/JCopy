syntax = "proto3";

message Empty {}

message CreateRoomRequest {
    string clientSession = 1;
    string expireTime = 2;      // Date str
}

message CreateRoomResponse {
    string roomId = 1;
    string textId = 2;
    repeated string fileIds = 3;
}

message JoinRoomRequest {
    string clientSession = 1;
    string roomId = 2;
}

message JoinRoomResponse {
    string result = 1;
    string roomId = 2;
    string textId = 3;
    repeated string fileIds = 4;
}

message CreateTextRequest {
    string expireTime = 1;      // Date str
}

message CreateTextResponse {
    string textId = 1;
}

message GetJoinedSessionsRequest {
    string textId = 1;
    string clientSession = 2;
}

message GetJoinedSessionsResponse {
    string roomId = 1;
    repeated string clientSessions = 2;
}

message GetTextRequest {
    string textId = 1;
}

message GetTextResponse {
    string textValue = 1;
}

message GetFilesRequest {
    string textId = 1;
    repeated string fileIds = 2;
}

message GetFilesResponse {
    string textValue = 1;
    repeated string fileNames = 2;
}

service RoomService {
    rpc CreateRoom (CreateRoomRequest) returns (CreateRoomResponse){};
    rpc JoinRoom (JoinRoomRequest) returns (JoinRoomResponse){};
    rpc GetJoinedSessions (GetJoinedSessionsRequest) returns (GetJoinedSessionsResponse){};
}

service StorageService {
    rpc CreateText (CreateTextRequest) returns (CreateTextResponse){};
    rpc GetFiles (GetFilesRequest) returns (GetFilesResponse){};
    rpc GetText (GetTextRequest) returns (GetTextResponse){};
}
